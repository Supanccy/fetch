<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
</head>
<body>
用户:<input type="text" name="" id='user'><br>
密码:<input type="text" name="" id='pass'><br>
<button class='login'>登陆</button>
<script type="text/javascript">
document.querySelector('.login')['onclick']=x=>{

	fetch(`http://localhost:2133/login?user=${user.value}&pass=${pass.value}`,{
		method:'GET'
	}).then((res)=>{

		res.json(()=>{
		    //json返回的是promise对象
            //这个地方不用去判断是否成成功，fetch会自动判断,并自动调用
            //服务器返回成功会调用then方法，失败调用catch
		}).then((res)=>{
			if(res.ok){
				document.body.style.background='red';
			}
			else{
				document.body.style.background='green';
			}
		}).catch(()=>{
			console.log('服务器错误')
		})
	})
}


</script>

</body>
</html>
