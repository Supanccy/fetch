<!doctype html> 
<html> 
<head> 
    <meta charset="utf-8"> 
    <title></title> 
</head>
<body>
头像:<input type="file" name="" id='fl'><br>
用户:<input type="text" name="" id='user'><br>
密码:<input type="text" name="" id='pass'><br>
<img src="" id='imgNode'>
<button class='login'>登陆</button>
<script type="text/javascript">
document.querySelector('.login')['onclick']=x=>{
	//console.log(fl.files[0])
	var fd = new FormData();
	fd.append('pic',fl.files[0])

	//console.log()
	//http://localhost:2133/login
	fetch(`http://localhost:2133/addPic`,{
		method:'POST',
		body:fd
	}).then((res)=>{
		res.json(()=>{

		}).then((res)=>{
			var {ok} = res;
			if(ok){
				let {dataUrl} = res;
				//console.log(dataUrl);
				imgNode.src = dataUrl;
			}
			else{
				alert('失败了');
			}
			//console.log(res)
			/*
			if(res.ok){
				document.body.style.background='red';
			}
			else{
				document.body.style.background='green';
			}
			*/
		}).catch(()=>{
			console.log('服务器错误')

		})
	})
}


</script>

</body>
</html>